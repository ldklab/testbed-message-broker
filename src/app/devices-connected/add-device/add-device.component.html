<h1 mat-dialog-title>Devices available</h1>
<mat-dialog-content>

  <mat-spinner *ngIf='loading'  style='margin: auto'></mat-spinner>

  <table mat-table [dataSource]="devices" *ngIf='!loading' class="mat-elevation-z8">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let device"> {{ device.name }} </td>
    </ng-container>

    <ng-container matColumnDef="ip">
      <th mat-header-cell *matHeaderCellDef> Address </th>
      <td mat-cell *matCellDef="let device"> {{ device.address }} </td>
    </ng-container>

    <ng-container matColumnDef="lastActive">
      <th mat-header-cell *matHeaderCellDef> Last active </th>
      <td mat-cell *matCellDef="let device"> {{ device.lastActive | date:'dd/MMM/yy @ HH:mm:ss' }} </td>
    </ng-container>

    <ng-container matColumnDef="addButton">
      <th mat-header-cell *matHeaderCellDef> Add </th>
      <td mat-cell *matCellDef="let device">
        <button
        mat-raised-button
        color='primary'
        (click)='addDevice(device._id)'
        >Add</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
  </table>

  <!-- <h3>Debug</h3>
  <pre>
    {{ devices | json}}
  </pre> -->
  <br><br><br>
  <details>
    <summary>Debug</summary>
    <pre>
      {{ devices | json}}
    </pre>
  </details>

</mat-dialog-content>
